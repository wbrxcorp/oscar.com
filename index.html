<html ng-app="MyApp">
  <head>
    <meta charset="UTF-8"/>
    <title>全文検索NAS</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular-resource.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.11.2/ui-bootstrap-tpls.min.js"></script>
    <script src="angulartics.min.js"></script>
    <script src="angulartics-ga.min.js"></script>
    <script src="angulartics-scroll.min.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-50657-19', 'auto');
    </script>
    <script>
      angular.module('MyApp', ['angulartics', 'angulartics.google.analytics','angulartics.scroll'])
      .run([ "$rootScope", "$location", "$analytics", function($scope, $location, $analytics) {
        //$analytics.pageTrack($location.path());
        $scope.eventTrack = $analytics.eventTrack;
      }]);
    </script>
  </head>
  <body>
    <div style="margin-top:-20px;background: url('searchonahand.jpg') no-repeat top center;height:430px;display:block;background-size: cover;">
      <div class="container" style="padding-top:60px;color:#fff">
        <h2 style="font-size:64px;line-height:60px;text-shadow: 2px 2px 1px #005,-2px 2px 1px #005,2px -2px 1px #005,-2px -2px 1px #005;">全文検索NAS</h2>
        <p class="lead">最新の検索技術が、あなたのビジネスに効率をもたらします</p>
        <p>全文検索NASは、キーワードを与えるだけで数百万件の文書ファイルから瞬時に目的のファイルを探し出すことの出来る全文検索エンジンを搭載したネットワーク接続型の記憶装置(NAS)です。</p>
        <p><big>専用お問い合わせ番号 050-3159-5792</big>(朝8時〜夜10時,年中無休) メール: <a href="mailto:info@jp.walbrix.com">info@jp.walbrix.com</a></p>
        <p><a href="http://www.walbrix.com/jp/">ワルブリックス株式会社</a></p>
        <div class="clearfix"></div>
      </div>
    </div>

    <div class="container" style="margin-top:1em;">
      <div class="panel panel-success">
        <div class="panel-heading"><span class="glyphicon glyphicon-exclamation-sign"></span> 今すぐ無料でお試しください</div>
        <div class="panel-body">
          <div class="row">
            <div class="col-sm-7">
              <p>専用OSをインストールすれば、使わなくなったパソコンを全文検索NASとして再利用できます。個人利用なら試用期限無期限で実質無料。</p>
              <p>インストールや機能に関するお問い合わせは 050-3159-5792 まで(朝8時〜夜10時,年中無休)</p>
            </div>
            <div class="col-sm-5">
              <p><a class="btn btn-success btn-lg btn-block" analytics-on="click" analytics-event="Walbrix" analytics-category="Download" href="http://www.walbrix.net/download.html" target="_blank" style="white-space: normal"><span class="glyphicon glyphicon-download-alt"></span> 専用OS「Walbrix」をダウンロード<br><small>メールを送っておいて後でダウンロードすることもできます</small></br></a></p>
              <!-- analytics-event=アクション analytics-category=カテゴリ -->
              <p><a class="btn btn-default btn-lg btn-block" analytics-on="click" analytics-event="Manual" analytics-category="Download" href="http://assets.walbrix.com/product/oscar/oscar-manual-0.3.pdf" target="_blank" style="white-space: normal"><span class="glyphicon glyphicon-book"></span> マニュアルをダウンロード(PDF)</a></p>
            </div>
          </div>
        </div>
      </div>

      <h2>朗報: フォルダを細かく作る必要はもうありません。</h2>

      <p class="lead">文書ファイルの全文検索を実現し、ファイル管理の手間を大幅に削減します</p>
      <p>ありとあらゆるビジネスの場面でパソコンが使用されるようになってから十数年が経つ今、蓄積した膨大な文書ファイルの整理は頭の痛い問題です。「5年前の記録が今になって必要になってしまったのだけど、担当者が異動になってしまっていて所在がわからない…」などということはよくあります。でもファイルを全文検索NASに保存しておけば大丈夫。フォルダをひたすらダブルクリックして探し回らなくても、キーワードで瞬時にインデックス検索して目的の文書ファイルを見つけ出すことができるのです。キーワードで検索できるとなればフォルダ分けによる分類整理も今までのように細かくする必要はなくなり、ざっくりで済んでしまううえに、異動に伴う業務の引き継ぎコストも削減できます。</p>

      <section id="about" analytics-on="scrollby" analytics-event="about" analytics-category="Scroll">
        <div class="feature_wrapper option1">
          <div class="row feature">
            <div class="col-sm-6">
              <img src="http://static.walbrix.net/va/oscar/nas.jpg" class="img-responsive" />
            </div>
            <div class="col-sm-6 info">
              <h3>NASとは？</h3>
              <p>NAS (Network Attached Storage)とは、ネットワーク接続型のハードディスク（ストレージ）です。<p>
              <p>NASは社内の全てのPCから利用出来る「共有フォルダ」として機能するシステムです。NASがあれば、ファイルをUSBメモリで受け渡したり、隣の席の人にメールで送ったりしなくて良くなります。</p>
            </div>
          </div>
          <div class="row feature">
            <div class="col-sm-6 info">
              <h3>全文検索 <small> - 目的の文書へ最速で到達</small></h3>
              <p class="lead">ファイル名やフォルダ名を思い出せなくても構いません</p>
              <p>全文検索NASはワード、エクセル、パワーポイントといったオフィス文書やPDFファイルの<strong>中身まで</strong>を高速に検索できる<strong>全文検索エンジン</strong>を搭載。ファイル名がわからなくてもインターネットで情報を検索するときのように思いついたキーワード（固有名詞や出来事など）をいくつか与えるだけで全てのフォルダから目的の文書ファイルを探し出せるのです。<p>
              </p>
            </div>
            <div class="col-sm-6 info">
              <img src="http://assets.walbrix.com/finderix-managed/fulltext.png" class="img-responsive" />
            </div>
          </div>
        </div>
      </section>

      <section id="screenshot" analytics-on="scrollby" analytics-event="screenshot" analytics-category="Scroll">
        <p><img src="oscar01.jpg" class="img-responsive"></p>
      </section>

      <h2>朗報その2: 普通のパソコンが簡単操作で全文検索NASに生まれ変わります。</h2>
      <p class="lead">廃棄予定のXPパソコン、捨てる前に再利用してみませんか</p>
      <p>マイクロソフト社が Windows XPに更新プログラムを提供するのを終了し、多くの企業で Windows XP搭載パソコンは随時廃棄されてゆく運命にあります。また、ご家庭にも使わなくなった XPパソコンがあるのではないでしょうか。全文検索NASは、専用の<strong>無料</strong>オペレーティングシステム <a href="http://www.walbrix.net" target="_blank">Walbrix(ワルブリックス)</a>で動作するソフトウェア製品ですので、使われなくなったパソコンにインストール(※)することで費用をほとんどかけずに試用することができます。</p>

      <h3>無料の専用OS Walbrix(ワルブリックス)</h3>

      <div class="row">
        <div class="col-sm-6">
          <img src="oscar02.png" class="img-responsive img-thumbnail">
        </div>
        <div class="col-sm-6">
          <img src="oscar03.png" class="img-responsive img-thumbnail">
        </div>
      </div>

      <p>専用OSの画面から簡単に全文検索NASをインストール</p>

      <p>※全文検索NASを試用いただくには、インテル Core2Duo以降など64bit対応のプロセッサとと1GB(OSに512MB、全文検索NASに最低512MBが必要です)以上のメモリを搭載したパソコンをご用意ください。なお Walbrixをインストールすることにより元の OS(Windows)は消去されます。</p>

      <div class="panel panel-success">
        <div class="panel-heading"><span class="glyphicon glyphicon-exclamation-sign"></span> 今すぐ無料でお試しください</div>
        <div class="panel-body">
      <div class="row">
        <div class="col-sm-7">
          <p>専用OSをインストールすれば、使わなくなったパソコンを全文検索NASとして再利用できます。個人利用なら試用期限無期限で実質無料。</p>
          <p>インストールや機能に関するお問い合わせは 050-3159-5792 まで(朝8時〜夜10時,年中無休)</p>
        </div>
        <div class="col-sm-5">
          <p><a class="btn btn-success btn-lg btn-block" href="http://www.walbrix.net/download.html" target="_blank" style="white-space: normal"><span class="glyphicon glyphicon-download-alt"></span> 専用OS「Walbrix」をダウンロード<br><small>メールを送っておいて後でダウンロードすることもできます</small></br></a></p>
              <p><a class="btn btn-default btn-lg btn-block" href="http://assets.walbrix.com/product/oscar/oscar-manual-0.3.pdf" target="_blank" style="white-space: normal"><span class="glyphicon glyphicon-book"></span> マニュアルをダウンロード(PDF)</a></p>
        </div>
      </div>
        </div>
      </div>

      <h3>専用OSなのでOS代金が無料</h3>

      <table class="table">
        <thead>
          <tr><td></td><td>他社製全文検索ソリューション</td><td>全文検索NAS</td></tr>
        </thead>
        <tr><td>動作に必要なオペレーティングシステム</td><td>サーバー版Windows(実売最低8万円程度)</td><td><a href="http://www.walbrix.net" target="_blank">専用OS</a>(<strong>無料</strong>)</td></tr>
        <tr><td>ユーザー数に応じた追加ライセンス料金</td><td>CALを購入する必要あり</td><td><strong>無料</strong></td></tr>
      </table>

      <div class="feature_wrapper option1">
        <div class="row feature">
          <div class="col-sm-6">
            <img src="http://static.walbrix.net/va/oscar/confidential.jpg" class="img-responsive" />
          </div>
          <div class="col-sm-6 info">
            <h3>門外不出 <small> - インターネットとは違います</small></h3>
            <p class="lead">クラウドは使用禁止ですか？でも大丈夫</p>
            <p>「検索が便利なのはわかるけど、規則上社外に文書ファイルを保存すことはできない」「インターネット回線が速くないので外にファイルを置くと遅くて不便」…心配ご無用、全文検索NASはインターネット上のクラウドサービスではありません。本製品はお客様の事業所内に設置するオンプレミス<small>※</small>なシステムです。</p>
            <p><small>※オンプレミス＝社内設置。クラウドの対義語。</small></p>
            <p>したがって文書の外部送信に関する規定の設けられた場所でも問題なく運用できますし、インターネット接続の速度が通常100Mbpsなのに対し一般的な社内LANは 1G(1000M)bpsと10倍ですから、速度の差は圧倒的です。<p>
          </div>
        </div>
      </div>

      <h2>朗報その3: 試用は無料です。</h2>
      <p>全文検索NASは無料でインストールして「試用」することができます。試用期限はありませんので、十分にその有効性をご確認になってからライセンスをご購入いただくことができます。試用版には広告が入るほか一部機能制限がありますが、<strong>個人利用で広告の表示や機能制限が問題にならない方は試用モードのままずっとお使い頂いても問題ありません</strong>。</p>
      <p><a href="https://spike.cc/p/xtu18zTC" target="_blank">ライセンスキーを購入</a>すると広告が表示されなくなり、機能制限がなくなります。</p>

      <section id="etc" analytics-on="scrollby" analytics-event="etc" analytics-category="Scroll">
        <div class="feature_wrapper option2" style="margin-top:60px;">
          <div class="section_header">
            <h3>その他の特徴</h3>
          </div>

          <!-- Features Row -->
          <div class="row">
            <!-- Feature -->
            <div class="col-sm-6 feature">
              <div class="box">
                <img class="one" src="http://assets.walbrix.com/finderix-managed/features-ico1.png" />
              </div>
              <div class="text">
                <h6>アクセス制限機能</h6>
                <p>一般的なNASと同様、各共有フォルダごとにユーザー名とパスワードによるアクセス制限をかけることができます。また、グループを定義してグループ単位でのアクセス許可設定を行うことも可能です<small>※</small>。</p>
                <p><small>※試用モードではユーザーやグループを設定することはできますが実際にはアクセス制限が適用されません</small></p>
              </div>
            </div>
            <!-- Feature -->
            <div class="col-sm-6 feature right">
              <div class="box">
                <img class="two" src="http://assets.walbrix.com/finderix-managed/features-ico1.png" />
              </div>
              <div class="text">
                <h6>保守サービス</h6>
                <p>保守サービスを別途ご契約頂くと、お客様オフィス内に設置された全文検索NASと当社の間で、強固に暗号化された通信経路を作成し、自動バックアップの設定等を行いお客様のデータがしっかりバックアップされているか定期的に遠隔チェックいたします。</p>
            <p>また、機器の設定変更やデータ消失時のバックアップからの復元についても遠隔から対応いたします。</p>
              </div>
            </div>
          </div>

          <!-- Features Row -->
          <div class="row last">
            <!-- Feature -->
            <div class="col-sm-6 feature">
              <div class="box">
                <img class="one" src="http://assets.walbrix.com/finderix-managed/features-ico1.png" />
              </div>
              <div class="text">
                <h6>自動同期機能</h6>
                <p>既にNASを導入済みで全文検索NASへの即時移行が難しい場合は、全文検索NASの自動同期機能をお使いください。毎週、指定の曜日時刻に他のNASの共有フォルダを自動的に複製します。この機能により、全文検索NASを社内検索サーバーとしてもお使いになれます。</p>
                <p><img src="oscar06.png" class="img-responsive img-thumbnail"></p>
              </div>
            </div>
            <!-- Feature -->
            <div class="col-sm-6 feature right">
              <div class="box">
                <img class="two" src="http://assets.walbrix.com/finderix-managed/features-ico1.png" />
              </div>
              <div class="text">
                <h6>外出先からもアクセス</h6>
                <p>NASに保存されたファイルに外出先からもアクセスしたい場合でも大丈夫。当社が提供する<a href="http://www.wbport.com" target="_blank">WBPORT.com</a>サービスをご検討ください。</p>
              </div>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-6">
            <img src="oscar04.png" class="img-responsive img-thumbnail"><br>
            共有フォルダの設定画面。アクセス可能なユーザーとグループを制限できます。
          </div>
          <div class="col-sm-6">
            <img src="oscar05.png" class="img-responsive img-thumbnail"><br>
            ユーザーとグループの設定画面。
          </div>
        </div>
      </section>

      <section id="try" analytics-on="scrollby" analytics-event="etc" analytics-category="Scroll">
        <h2>すぐに試用を開始してみましょう。</h2>
        <p>全文検索NASを使ってみるには、使っていない適当なパソコンに専用オペレーティングシステム <a href="http://www.walbrix.net">Walbrix(ワルブリックス)</a>をインストールします。</a></p>

        <div class="panel panel-success">
          <div class="panel-heading"><span class="glyphicon glyphicon-exclamation-sign"></span> 今すぐ無料でお試しください</div>
          <div class="panel-body">
        <div class="row">
          <div class="col-sm-7">
            <p>専用OSをインストールすれば、使わなくなったパソコンを全文検索NASとして再利用できます。個人利用なら試用期限無期限で実質無料。</p>
            <p>インストールや機能に関するお問い合わせは 050-3159-5792 まで(朝8時〜夜10時,年中無休)</p>
          </div>
          <div class="col-sm-5">
            <p><a class="btn btn-success btn-lg btn-block" analytics-on="click" analytics-event="Walbrix" analytics-category="Download" href="http://www.walbrix.net/download.html" target="_blank" style="white-space: normal"><span class="glyphicon glyphicon-download-alt"></span> 専用OS「Walbrix」をダウンロード<br><small>メールを送っておいて後でダウンロードすることもできます</small></br></a></p>
            <p><a class="btn btn-default btn-lg btn-block" analytics-on="click" analytics-event="Manual" analytics-category="Download" href="http://assets.walbrix.com/product/oscar/oscar-manual-0.3.pdf" target="_blank" style="white-space: normal"><span class="glyphicon glyphicon-book"></span> マニュアルをダウンロード(PDF)</a></p>
          </div>
        </div>
          </div>
        </div>

        <p>全文検索NASに興味があるけど、始め方がよくわからないという方はこちらへ:</p>
        <p class="lead"><big>全文検索NAS専用お問い合わせ番号 050-3159-5792</big>(朝8時〜夜10時,年中無休) <br>メール: <a href="mailto:info@jp.walbrix.com">info@jp.walbrix.com</a><br>ワルブリックス株式会社 <small>(システムを実際に開発している者が電話に出ます)</small></p>

        <h3>もしくはプリインストール機の購入をご検討ください</h3>
        <p><a href="http://www.maxserve.co.jp/storage/oscar.html"><img src="http://static.walbrix.net/va/oscar/finderix.jpg" class="img-responsive img-thumbnail"></a></p>
        <p>全文検索NASプリインストールのオーダーメイドサーバーならマックスサーブの <a href="http://www.maxserve.co.jp/storage/oscar.html" target="_blank">Finderix</a>をどうぞ</p>

        <h2>今は時間がない方へ</h2>
        <p class="lead">興味はあるけど、今は時間がない・・・</p>
        <p>大丈夫です。「お気に入り」を使わなくても「全文検索NAS」でインターネットを検索すればまたいつでもこのページへ来ることができます。</p>

        <p><img src="oscar_internet_search.png" class="img-responsive img-thumbnail"></p>

        <p><big>「全文検索NAS」</big> （ぜんぶんけんさくなす）いつか時間がある時にこの言葉だけを思い出してください！</p>
      </section>
    </div>

    <hr>

    <section id="report" analytics-on="scrollby" analytics-event="report" analytics-category="Scroll">
      <div class="container">
        <p class="c2 title"><a name="h.jfvl0qr1mklc"></a><h1>全文検索NASの設計と実装</h1></p><p class="c0 c10"></p>
        <p class="c4 c10"><span>2014年8月 嶋田 大貴 (ワルブリックス株式会社</span><sup><a href="#ftnt1" name="ftnt_ref1">[1]</a></sup><span>)</span></p>
        <p class="c4"><span>IT市場のトレンドはクラウドとソーシャルで占められているが、組織のレギュレーションによる制約、保存容量の巨大さといった理由から依然としてプライベートネットワーク内のストレージシステムに文書を保管する需要が一部に存在する。クラウドサービスにデータを保存するのが当たり前であるかのような風潮がはびこるにもかかわらず、未だ NAS (Network Attached Storage) アプライアンスと呼ばれる製品群が個人向けのみならず企業向けにも販売され続けていることはその証左である。</span></p>
        <h2 class="c2"><a name="h.2u53sr37pe5i"></a><span>市販NASの問題点: 全文検索機能の欠如</span></h2>
        <p class="c4">
          市販のNASアプライアンスには豊富な機能が搭載されているものの、大量の文書ファイルを保存する用途においてある重要な機能が欠けている。
          それは保存されている文書ファイルを全文検索する機能である。全文検索とは、文書ファイルのファイル名だけでなく内容までもを対象に
          検索を実行することにより、ユーザーが求める文書を（まるでGoogleでインターネット上の情報を検索するように）即時に探し出せる機能をいう
          <sup><a href="#ftnt2" name="ftnt_ref2">[2]</a></sup>。個人ブログなどではこの機能を「インデックス検索」と呼んでいる例も
          見受けられる（全文検索に限らずコンピュータで行われる検索処理では多くの場合何らかの索引すなわちインデックスが使用されるため、
          厳密にはインデックス検索という用語が特に全文検索を指すわけではない）。
        </p>
        <p class="c4">
          一部の製品には機能として全文検索が(カタログスペック上)存在する場合もあるが、多くの場合は実用性に難があり、そのためかメーカーも
          あまりその機能を宣伝することはない。そのため多くのユーザーは、低速な NAS上のフォルダに対してクライアントPCから
          <a href="http://www.forest.impress.co.jp/library/software/tanzaburou/" target="_blank">探三郎</a>のような
          フリーソフトウェアを用いて全文検索インデックスを個別に作成し利用するなどといった妥協を強いられている。
          NAS製品に全文検索機能が搭載されない又は搭載されてもそれが宣伝に値する実用性を有しないことには下記のような事情があると推察される。
        </p>
        <h3 class="c2"><a name="h.cxg19olrp1vt"></a><span>理由1. NASアプライアンスのハードウェア特性</span></h3>
        <p class="c4"><span>多くのNASアプライアンス製品はコストや消費電力を下げるため安価で非力なプロセッサと少ないメモリで構成されている。通常のファイル共有サービスを提供するだけならば高速なプロセッサや大容量のメモリは必要無いためこれは理に適っているが、全文検索機能を提供するとなれば状況は一変する。プロセッサの貧弱さは現実的な時間内に検索インデックス</span><sup><a href="#ftnt3" name="ftnt_ref3">[3]</a></sup><span>を作り出すことを難しくし、またメモリの少なさは効率的に検索を実行するため十分な大きさのインデックスをメモリ上に展開することを妨げる。</span></p>
        <p class="c0"><span></span></p><h3 class="c2"><a name="h.5zt0b7d38fyd"></a><span>理由2. 品質維持とサポートの難しさ</span></h3>
        <p class="c0"><span></span></p><p class="c4"><span>全文検索のためのインデックスを作成するためには、文書ファイルからテキスト部分を抽出する処理が必要である。しかしながら、ひとくちに文書ファイルと言ってもその形式は様々で、具体的には Microsoft Officeの各形式、PDF等がある。全文検索機能を提供するにはこれらのファイル形式それぞれについてテキスト部を抽出するプログラムが必要なばかりか、外見上同じファイル形式であってもバージョンの違いなどにより内部形式に差異があったりするためテキスト抽出プログラムをそれらに逐一対応させるという困難が存在するのに対し、ユーザーは可能な限り保有している全ての文書ファイルを検索できることを望むうえ、NASアプライアンスは原則として売り切りのハードウェアであるという製品の性質上ソフトウエアの更新による対応は難しい</span><sup><a href="#ftnt4" name="ftnt_ref4">[4]</a></sup><span>。</span></p>
        <p class="c0"><span></span></p><h2 class="c2"><a name="h.67tczslqo82j"></a><span>全文検索機能提供へのアプローチ</span></h2><p class="c0"><span></span></p>
        <p class="c4"><span>全文検索機能が有用であるにも関わらず欠落していることは認識されているため、既に製品化されているソリューションが存在する。ここでは NASを全文検索するアプローチとして外付け型と統合型を比較する。</span></p>
        <p class="c0"><span></span></p><h3 class="c2"><a name="h.4vpmg0p7ccq5"></a><span>外付け型検索エンジンのアプローチ</span></h3><p class="c0"><span></span></p>
        <p class="c4"><span>前述のような理由によってNASに欠落している全文検索機能を、外付け型のアプローチで補完する全文検索専用のソフトウェアないしアプライアンス製品が存在している。これらの製品はプロセッサパワー・メモリ搭載量ともに豊富な IAサーバー</span><sup><a href="#ftnt5" name="ftnt_ref5">[5]</a></sup><span>などで構築され、NASとは別に設置される。対象となる NASの内容を定期的にクロールすることで全文検索用のインデックスを作成し、ユーザーに全文検索機能を提供するこの方式のメリットは、いかなる種類のNAS（だけでなくしばしばWebサーバも）にも全文検索機能を付加できることである。他方デメリットはNASと別個に物理的な設置場所を要するであろうことと、NAS上のファイルが追加・更新されても検索エンジンによる次回のクロール処理が行われるまでそれが検索結果に反映されないことである。</span></p>
        <p class="c0"><span></span></p><h3 class="c2"><a name="h.xgzixzongiz0"></a><span>統合型のアプローチ＝全文検索NAS</span></h3><p class="c0"><span></span></p>
        <p class="c4"><span>外付け型検索エンジンとは異なり、それ自体に実用的な全文検索機能を有するNASというよりシンプルなアプローチが考えられる。この方式では、先述した外付け型検索エンジンのメリットとデメリットがちょうど逆転することになる。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>この方式を取る全文検索可能なNASを全文検索NASと定義し、本稿はそれの実装にまつわる技術的な道程及び課題の議論を主題とする。市販のNASアプライアンス製品と異なりプロセッサが強力でメモリ容量が大きくなおかつ入手の容易なPCやIAサーバのを前提として機能を構築することで、実用的な全文検索機能を持ったNASを構築するという目論見である。</span></p>
        <p class="c0"><span></span></p><h3 class="c2"><a name="h.likgads9vh8"></a><span>文書ファイルの検索機能を提供するがNASではないもの</span></h3><p class="c0"><span></span></p>
        <p class="c4"><span>Webブラウザを通じて文書ファイルをリポジトリに登録でき、それを全文検索できるソリューションが製品として存在する。その種のものは OSから直接利用出来る共有フォルダをサービスとして提供していない（ファイルをクライアントアプリケーションが直接開いて利用できない）ため、文書共有サービスではあっても NASというカテゴリには入らない。</span></p>
        <p class="c0"><span></span></p><h1 class="c2"><a name="h.jo404q3jehg"></a><span>全文検索NASに必要な要素</span></h1><p class="c0"><span></span></p>
        <p class="c4"><span>全文検索NASには以下の要素が必要である。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>a. オペレーティングシステム</span></p><p class="c4"><span>b. ファイル共有サービス</span></p>
        <p class="c4"><span>c. 全文検索エンジン</span></p><p class="c4"><span>d. 検索インデックス作成サービス</span></p><p class="c4 c8"><span>d-1. テキスト抽出サービス</span></p>
        <p class="c4"><span>e. ユーザーインターフェイス</span></p><p class="c0"><span></span></p><h2 class="c2"><a name="h.ab2jqqej2bst"></a><span>a. オペレーティングシステム</span></h2><p class="c0"><span></span></p>
        <p class="c4"><span>ネットワーク及びファイルシステムを司る基本サービスを提供するオペレーティングシステムとしては多くの市販NASと同様に Linuxを用いる。システムそのものをワンストップでネットワーク配布可能にするため、GNU/</span><span>Linuxを含むソフトウェア全体を Xen</span><sup><a href="#ftnt6" name="ftnt_ref6">[6]</a></sup><span>の準仮想マシン</span><sup><a href="#ftnt7" name="ftnt_ref7">[7]</a></sup><span>として構成したのち tarアーカイバでパッケージした準仮想マシンイメージを作成する。Xenの準仮想マシンイメージは、市販PCやIAサーバなどのx86-64アーキテクチャを持つコンピュータ上で動作する Walbrixオペレーティングシステム</span><sup><a href="#ftnt8" name="ftnt_ref8">[8]</a></sup><span>でダウンロードし実行できる。また、このイメージは Docker</span><sup><a href="#ftnt9" name="ftnt_ref9">[9]</a></sup><span>&nbsp;へ移植することも容易であると思われる。</span></p><p class="c0"><span></span></p><p class="c4"><span>イメージを作成するための基本となる Linuxディストリビューションとしては Gentoo Linux</span><sup><a href="#ftnt10" name="ftnt_ref10">[10]</a></sup><span>を用いる。但し、配布容量を削減するため Gentoo Linuxとしての機能は削除しシステムの動作に最低限必要な要素のみ残す</span><sup><a href="#ftnt11" name="ftnt_ref11">[11]</a></sup><span>。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>Windows Server</span><sup><a href="#ftnt12" name="ftnt_ref12">[12]</a></sup><span>を用いる製品と異なり、オペレーティングシステム自体ないし利用ユーザー数に対してかかるライセンス費用は全く発生しない。</span></p>
        <p class="c0"><span></span></p><h2 class="c2"><a name="h.g0ud3ysmguc6"></a><span>b. ファイル共有サービス</span></h2><p class="c0"><span></span></p>
        <p class="c4"><span>ファイル共有サービスとしては、市販のNASと同様 SMBプロトコル</span><sup><a href="#ftnt13" name="ftnt_ref13">[13]</a></sup><span>サーバ(CIFS)のオープンソース実装である Samba</span><sup><a href="#ftnt14" name="ftnt_ref14">[14]</a></sup><span>を用いる。SMBはもともと Windows用のファイル共有サービスであるが、Mac OS Xなどからも利用できる。</span></p><p class="c0"><span></span></p>
        <h2 class="c2"><a name="h.fcqo9yn0qgzq"></a><span>c. 全文検索エンジン</span></h2><p class="c0"><span></span></p>
        <p class="c4"><span>膨大なテキストを高速に検索するには全文検索エンジンが必要である。本全文検索NASの実装には全文検索エンジンとして Groonga</span><sup><a href="#ftnt15" name="ftnt_ref15">[15]</a></sup><span>を使用する。世界的に有名な全文検索エンジンとして別に Lucene</span><sup><a href="#ftnt16" name="ftnt_ref16">[16]</a></sup><span>が存在するが、Groongaは国産であり日本語テキストの全文検索において前身の Senna</span><sup><a href="#ftnt17" name="ftnt_ref17">[17]</a></sup><span>から続く長い経験が反映されている。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>Groongaは全文検索エンジンでありながらデータベースとしての機能を併せ持っているため、テキストの検索用途だけでなくNAS上の全てのファイルに関する一般情報を保存するためにも用いる。</span></p>
        <p class="c0"><span></span></p><h2 class="c2"><a name="h.agvd1o2zpjb7"></a><span>d. 検索インデックス作成サービス</span></h2><p class="c0"><span></span></p>
        <p class="c4"><span>高速な検索処理を行うには、あらかじめ興味の対象となる内容を検索用に適した構造に組み直したデータ、すなわちインデックスを作成する必要がある。データをGroongaが要求する形式に整形して投入することでGroongaによりインデックスが作成される。このGroongaにデータを投入するまでの処理をする部分を検索インデックス作成サービスと呼ぶことにする。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>この処理は Python</span><sup><a href="#ftnt18" name="ftnt_ref18">[18]</a></sup><span>言語を用いて実装する。Groogaを Pythonのメモリ空間内で効率的に利用するため、GObject introspection 機構と pygobjectモジュール、そして groonga-gobjectを用いて Groongaの機能にアクセスする</span><sup><a href="#ftnt19" name="ftnt_ref19">[19]</a></sup><span>。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>他の選択肢として有力なプログラミング言語に Go</span><sup><a href="#ftnt20" name="ftnt_ref20">[20]</a></sup><span>&nbsp;がある。Pythonと異なりプラットフォームにとってネイティブな実行ファイルを生成するため高速で省メモリな動作が期待出来るほか、C言語で記述されたライブラリの関数を直接コールできるため Groongaを利用する際のオーバーヘッドが減ることも考えられる。にも関わらず依然として Pythonが選択されたのは実装者が十分 Goに習熟していないという理由による。Goによる実装は今後の課題として認識されている。</span></p>
        <p class="c0"><span></span></p><h2 class="c2"><a name="h.80paffv7h43p"></a><span>d-1. テキスト抽出サービス</span></h2><p class="c0"><span></span></p>
        <p class="c4"><span>dを行うにあたっては、NAS上に保存された文書ファイルからテキスト部分を抽出する処理が必要となる。この処理をする部分をテキスト抽出サービスと呼ぶことにする。</span></p>
        <p class="c0"><span></span></p><h2 class="c2"><a name="h.cg86k96vie3u"></a><span>e. ユーザーインターフェイス</span></h2><p class="c0"><span></span></p>
        <p class="c4"><span>ユーザーが全文検索機能を利用するにあたっては、ユーザーから検索キーワードの入力を受け付け、全文検索を実行した上でその結果を表示し、対象のファイルへのアクセスを提供する画面が必要となる。また、NASとしての機能を管理するためにもやはり何らかの管理画面が必要である。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>この画面は Webブラウザから利用出来る所謂「Webアプリケーション」として実装する。よって全文検索NASは Sambaサーバであり Webサーバでもあるということになる。モダンな Webアプリケーションの作法に則り、サーバーサイドとクライアントサイドの組み合わせで動作する形態を取る。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>サーバーサイドの実装には Python言語と Flask</span><sup><a href="#ftnt21" name="ftnt_ref21">[21]</a></sup><span>フレームワークを使用する。また、Groongaへのアクセスについては d. と同様 groonga-gobjectを用いる。Webサーバ(Webブラウザとの通信を直接担当しアプリケーションとの仲介をする)には Apacheを用いるが、WSGI</span><sup><a href="#ftnt22" name="ftnt_ref22">[22]</a></sup><span>に対応している Webサーバであればこれに限る必要はない。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>クライアントサイドのプログラムはWebブラウザによって解釈され実行される。一般的に JavaScript言語で実装されるためそれに倣い、フレームワークとして AngularJS</span><sup><a href="#ftnt23" name="ftnt_ref23">[23]</a></sup><span>を使用する。</span></p>
        <p class="c0"><span></span></p><h1 class="c2"><a name="h.dnv6gnepxeri"></a><span>検索インデックス作成サービスの設計と実装</span></h1><p class="c0"><span></span></p>
        <p class="c4"><span>全文検索NASを実装するにあたっての技術的な胆といえる部分はこれになる。設計のポイントは、</span></p><p class="c0"><span></span></p>
        <ul class="c9 lst-kix_5dtil9pq7q2r-0 start"><li class="c4 c6"><span>ユーザーの望むであろう検索条件の指定と検索結果の表示に対応できる</span></li><li class="c4 c6"><span>オンタイムで検索インデックスを作成させることができる</span></li><li class="c4 c6"><span>100万件オーバーの大量ファイルに対応できる</span></li></ul><p class="c0"><span></span></p>
        <p class="c4"><span>といった要件を満たすことを目標として絞り込まれる。</span></p><p class="c0"><span></span></p>
        <h2 class="c2"><a name="h.3ahozy3xr45b"></a><span>データベース・スキーマ</span></h2><p class="c0"><span></span></p><p class="c4"><span>先述したようにGroongaは検索エンジンでありながらデータベースでもあるため、一般的なデータベースと同様にスキーマ定義を行う必要がある。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>ファイルを検索するという機能を提供するのであるから、当然データベースには対象となる全てのファイルについての必要な情報を無駄なく保存できなければならない。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>この要件によりデータベース・スキーマは、Sambaにより共有フォルダとして公開されているディレクトリ以下に存在する全てのファイルやディレクトリについてのメタ情報（ファイルシステム上の位置を特定する情報、ファイル名、サイズ、最終更新日）を保持し、なかでも文書ファイルについてはそのテキスト部分を保持できる</span><sup><a href="#ftnt24" name="ftnt_ref24">[24]</a></sup><span>よう設計された。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>文書ファイルについてはファイル全体のハッシュ値をキーとしてそ内容となるのテキストをファイル情報とリンクした別のテーブルに保存することで、同じ内容のファイルを何度も全文検索のためのテキスト抽出処理に通さなくても良いようになっている</span><sup><a href="#ftnt25" name="ftnt_ref25">[25]</a></sup><span>。</span></p>
        <p class="c0"><span></span></p><h3 class="c2"><a name="h.47pd2ev5kre3"></a><span>ファイルシステム上の位置をパス名で保持することの問題</span></h3><p class="c0"><span></span></p>
        <p class="c4"><span>POSIX的なファイルシステム上で特定のファイルやディレクトリを特定する唯一無二の方法は、そのパス名を用い</span><span>て探索す</span><span>ることである。ファイルシステム上のファイルを全文検索するオープンソースソフトウェアの多くは、何らかの形でパス名をキーにしたデータベースを内部で用いている。</span></p><p class="c0"><span></span></p>
        <p class="c4"><span>全文検索NASの実装をするにあたって、当初はそれに倣いパス名のハッシュ値をファイル情報の主キーとし、実際のパス名とあわせてデータベースにに格納することでファイルシステム上の位置を特定する手段としていたが、この方式には大きな問題があった。問題とは、端的に言えばリネームや移動に対応できないことである。</span></p><p class="c0"><span></span></p>
        <p class="c4"><span>リネーム・移動元のレコードを削除して新しいパス名のレコードを新たに挿入すれば良いと考えるかもしれない。単一のファイルをリネーム・移動する場合ならそれで良いが、100万件のファイルを配下に持つディレクトリをリネームした場合はどうか。配下100万件のレコードについても延々と同様の処理をしなければならないのである。最悪、たかがディレクトリをリネームしただけなのにデータベースを破棄して作成しなおすのと変わらない分量の処理が発生しシステムの負荷を急上昇させることになる。そしてその時、ディレクトリのリネームが検索インデックスに反映されない（システムとしては反映させようとしているが時間がかかっている）ことに気付いたユーザーがリネームを何度も再試行することにより事態が悪化することは想像に難くない。</span></p><p class="c0"><span></span></p>
        <p class="c4"><span>データベース設計を行ったことのある者ならすぐに気付くと思うが、問題は容易に変更されうる「名称」という要素を使って物事への参照を保持することにある。しかしながら、先述したように</span><span class="c5">ファイルシステム上の存在を特定する唯一無二の方法</span><span>は</span><span class="c5">名称を用いて探索すること</span><span>であり、間の何かが足りていないことになる。</span></p><p class="c0"><span></span></p>
        <p class="c4"><span>名称以外の変化しにくい固有値として iノード番号をキーに用いる方法も考案されたが、ファイルの削除などで使われなくなったiノード番号が十分に長い周期で再利用されることは誰も保証できないであろうし、なにより検索対象の共有フォルダを tarでバックアップしてリストアしただけでデータベースとの参照関係が全滅してしまうようでは運用面で困るため、それとは別のとある要素を用いることとした。「とある要素」についてはここであえて示さずとも様々なものが考えられるだろう。</span></p>
        <p class="c0"><span></span></p><h3 class="c2"><a name="h.rs6nx3jbiiq3"></a><span>分かち書きとN-GRAM</span></h3><p class="c0"><span></span></p>
        <p class="c4"><span>日本語テキストの検索に固有の問題であるが、全文検索インデックスの構築をするにあたっては分かち書きとN-GRAM</span><sup><a href="#ftnt26" name="ftnt_ref26">[26]</a></sup><span>のいずれの方式を使用するかという選択をしなければならない</span><sup><a href="#ftnt27" name="ftnt_ref27">[27]</a></sup><span>。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>分かち書きは文章を形態素解析</span><sup><a href="#ftnt28" name="ftnt_ref28">[28]</a></sup><span>により単語単位に分割してインデックスする方式であるのに対し、N-GRAMでは（正確さを差し置き極めて簡単に説明すると）文字単位でのインデックス作成が行われる。例えばユーザーがふと京都への旅行を思い立ち、「京都」をキーワードとして検索した時に「東京都」を含む文書まで検索にマッチしてしまうのは明らかに意図するところではないが、分かち書き方式であれば「東京都」は「東京」＋「都」として認識されるため「京都」とマッチすることを避けられるのに対し、N-GRAMは文字の並びが一致していればマッチしてしまうため、京都について検索すると東京都も検索結果に並んでしまうことになる。もしN-GRAMを用いた検索で京都についてだけ知りたければ「京都 -東京都」のようにユーザーが除外条件を検索式に追加しなければならない。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>しかしながら、欧文と異なり和文は単語が空白で区切られていないため文章から単語を抽出することは容易ではない。「東京」＋「都」の例は形態素解析の結果が人間の期待通りであった一例に過ぎず、文章を解釈するのがコンピュータである以上、区切りの与え方が常に人間の期待通りになるわけではない。（人間ですら区切りを読み間違えて文章を誤読することはある）</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>また日本語テキストの形態素解析を正確に行うには膨大ば品詞データベース(辞書)が必要であるが、言葉は新しくなってゆくものであるから、いくらデータベースを拡充したところで時間の経過と共に陳腐化することは免れない。それもさることながら、辞書で固有名詞を十分にカバーすることはそもそも困難であるため企業の内部文書をインデックス化するのには向かないと考えられる。これにより全文検索NASの実装にあたっては N-GRAMをインデックス方式として選択した。</span></p>
        <p class="c0"><span></span></p><h2 class="c2"><a name="h.7rghmal5g1c0"></a><span>リアルタイムでのインデックス更新</span></h2><p class="c0"><span></span></p>
        <p class="c4"><span>NASと全文検索エンジンを密に統合しなければ実現できないことのひとつがこのリアルタイムでのインデックス更新である。これが出来れば、ファイルを共有フォルダに新しく保存したり、または上書きした次の瞬間には検索エンジンにもその内容が反映されることになる。全文検索を必要とするようなNASの利用現場では典型的にファイルの生息期間が非常に長く常に最新の情報を検索しなければならない場面が多いとは考えにくいが、デモンストレーションでのインパクトが強いであろうという主に商業的な理由</span><sup><a href="#ftnt29" name="ftnt_ref29">[29]</a></sup><span>もありこれを重要視している。</span></p><p class="c0"><span></span></p>
        <h3 class="c2"><a name="h.fw7zoseto830"></a><span>inotfy機構による変更検知</span></h3><p class="c0"><span></span></p>
        <p class="c4"><span>ファイルに変更があったことをリアルタイムに検知するためには下記の方法がある。</span></p><p class="c0"><span></span></p>
        <ul class="c9 lst-kix_mh475c9lsy8-0 start"><li class="c4 c6"><span>sambaのvfs機構</span></li><li class="c4 c6"><span>Linuxのinotify</span><sup><a href="#ftnt30" name="ftnt_ref30">[30]</a></sup><span>機構</span></li></ul><p class="c0"><span></span></p>
        <p class="c4"><span>前者については情報がほとんど無いが後者は広く利用されており Python用のモジュールである pyinotify</span><sup><a href="#ftnt31" name="ftnt_ref31">[31]</a></sup><span>&nbsp;も存在するため後者を採用した。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>inotifyは特定のディレクトリに関するイベントを通知する Linuxカーネル独自の機構である。inotifyはサブディレクトリで発生したイベントを通知しないため、特定のディレクトリ以下を再帰的に監視したい場合は配下全てのディレクトリを監視対象として指定する必要があるが、pyinotifyはオプションによりそれも行ってくれるようになっている</span><sup><a href="#ftnt32" name="ftnt_ref32">[32]</a></sup><span>。（監視中に起こったディレクトリの作成や削除もフォローする）</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>inotifyにより発せられるイベントに従ってファイルの最新情報を逐次データベースに記録するデーモンを Pythonで開発し、これを watch と名付けた。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>イベントを処理するにあたって注意しなければならないことは、ひとつひとつのイベントを処理するのに長々と時間をかけるべきではないということである。さもなければ、大量のファイルが一括で共有フォルダに投入された時などにイベントキューが溢れてしまいイベントの取りこぼしを起こす結果となる。そのためイベントハンドラ内では極力単純な更新処理のみを行い（対象となるファイルに対応するデータベース・レコードに dirtyフラグを付ける等）、本格的な処理は後述する updateプロセスに委ねている。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>それでもイベントの取りこぼしを起こりにくくするため、sysctlパラメータ fs.inotify.max_queued_eventsを調整することが望ましい。</span></p>
        <p class="c0"><span></span></p><h2 class="c2"><a name="h.kouhlpjq4anx"></a><span>updateプロセス</span></h2><p class="c0"><span></span></p>
        <p class="c4"><span>以下のような時には、updateプロセスが起動する。</span></p><p class="c0"><span></span></p>
        <ul class="c9 lst-kix_eykbobu03iim-0 start"><li class="c4 c6"><span>inotifyによるイベントを受信してデータベースに何らかの変更が発生した時</span></li><li class="c4 c6"><span>前回の updateプロセス実行から所定のインターバルが経過した時</span></li><li class="c4 c6"><span>walk(後述)が行われたとき</span></li></ul><p class="c0"><span></span></p><p class="c4"><span>updateプロセスはデータベースから dirtyフラグの付けられたレコードを検索し、対象となるファイルやディレクトリを検査して必要な更新処理を行う。dirtyフラグの付けられたファイルについては必要に応じてテキスト抽出処理にかけ、抽出した内容を Groongaに投入する。ファイルシステム上に対象が既に存在しなかったり別の物に置き換わったりしている場合はデータベースからレコードを自体を削除する。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>テキスト抽出処理の呼び出しはプロセッサの数+1個のプロセスプールによって並列的に行う。これにより、対象となるファイル数が多い場合のスループットが向上する。</span></p>
        <p class="c0"><span></span></p><h2 class="c2"><a name="h.zb3yndmnypq2"></a><span>定期的なインデックス更新</span></h2><p class="c0"><span></span></p>
        <p class="c4"><span>何らかの理由によりリアルタイムで拾いきれなかった更新分を救済するため、cron的な定期ジョブとして共有フォルダ全体の更新処理（walk）プロセスを起動する。この処理には時間がかかる（100万件のファイルを walkするのに数十分）ため、実行間隔や実行時間には配慮が必要である。</span></p><p class="c0"><span></span></p>
        <p class="c4"><span>walkプロセスはファイルシステムを文字通り walkしてデータベースとの差異を発見し、更新される必要があるレコードに dirtyフラグを付けて回る。また、ファイルシステム上で発見されなかったファイルやディレクトリについての(つまり孤児化した)レコードをデータベースから削除する。walkの完了後、dirtyを回収するため updateプロセスの起動がトリガーされる。</span></p><p class="c0"><span></span></p>
        <h2 class="c2"><a name="h.9r2xdli6quyw"></a><span>テキスト抽出処理</span></h2><p class="c0"><span></span></p><p class="c4"><span>各種文書ファイルから検索対象となるテキスト部分を抽出するには、それぞれ対応したオープンソースの変換プログラムをサブプロセスとして呼び出しその出力を拾い上げる。あくまでオープンソースである故、プロプライエタリなソフトウェアで作成されたファイルの100%のから問題なく抽出処理が出来るわけではないが、抽出できなかったファイルについてはやむを得ないものとする。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>変換プログラムは入力ファイルの内容によって無限ループに陥ることが多いため、OSの timeコマンドを通して変換プログラムを走らせることで実行時間に制限を設けてこれに対処した。</span></p>
        <p class="c0"><span></span></p><p class="c4"><span>抽出されたテキストの文字エンコーディングが UTF-8</span><sup><a href="#ftnt33" name="ftnt_ref33">[33]</a></sup><span>でない可能性がある場合は、nkf</span><sup><a href="#ftnt34" name="ftnt_ref34">[34]</a></sup><span>により変換元のエンコーディングを自動判別させた上で UTF-8に変換する。</span></p>
        <p class="c0"><span></span></p><h3 class="c2"><a name="h.rdfh9e72wii7"></a><span>抽出処理に利用するプログラム</span></h3><p class="c0"><span></span></p>
        <p class="c4"><span>様々な文書フォーマットを変換できる unoconv</span><sup><a href="#ftnt35" name="ftnt_ref35">[35]</a></sup><span>&nbsp;というプログラムがあるが、これの実態は OpenOffice</span><sup><a href="#ftnt36" name="ftnt_ref36">[36]</a></sup><span>又はLibreOffice</span><sup><a href="#ftnt37" name="ftnt_ref37">[37]</a></sup><span>のフロントエンドである。（ダミーで良いとはいえ）X11</span><sup><a href="#ftnt38" name="ftnt_ref38">[38]</a></sup><span>サーバを必要とし多大な実行時間とメモリを消費する割には抽出の成功率がそれほど高くないことと、システムの配布容量へのインパクトが大きすぎるためこれを使用することは諦め、各フォーマットに特化されたプログラムを呼び分けるようにした。</span></p><p class="c0"><span></span></p>
        <h1 class="c2"><a name="h.58s8ukwc4wpb"></a><span>ユーザーインターフェイスの実装</span></h1><p class="c0"><span></span></p><p class="c4"><span>全文検索NASに必要なユーザーインターフェイスは大きく分けて下記の二種類である。</span></p>
        <p class="c0"><span></span></p><ul class="c9 lst-kix_s657sti9o05b-0 start"><li class="c4 c6"><span>検索の実行とファイルへのアクセスを提供するユーザー向け画面</span></li><li class="c4 c6"><span>NASとしての機能を管理するための管理画面</span></li></ul><p class="c4"><span>なお、共有フォルダへの直接アクセスについては Samba及びクライアントOSの範疇であるためここでは扱わない。</span></p>
        <p class="c0"><span></span></p><h2 class="c2"><a name="h.q26h74l6o9m0"></a><span>ユーザー向け画面</span></h2><p class="c0"><span></span></p>
        <p class="c4"><span style="overflow: hidden; display: inline-block; margin: 0.00px -0.00px; border: 1.33px solid #d9d9d9; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 611.50px; height: 402.17px;"><img alt="" src="image00.png" style="width: 611.50px; height: 402.17px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c0"><span></span></p>
        <p class="c4"><span>(未稿)</span></p><p class="c0"><span></span></p>
        <h2 class="c2"><a name="h.fobwg4q6y4fz"></a><span>管理画面</span></h2><p class="c0"><span></span></p><p class="c4"><span>(未稿)</span></p>
        <p class="c0"><span></span></p><h1 class="c2"><a name="h.f9q4b0gmuv5o"></a><span>システムの配布容量</span></h1><p class="c0"><span></span></p>
        <p class="c4"><span>全文検索NASの準仮想マシンイメージは tar.xz</span><sup><a href="#ftnt39" name="ftnt_ref39">[39]</a></sup><span>形式で 200MB程度であり、これは市販されているNASアプライアンスのファームウェアと比較しても低容量である。</span></p><p class="c0"><span></span></p>
        <h1 class="c2"><a name="h.hzl8m4vzttqj"></a><span>課題</span></h1><p class="c0"><span></span></p><p class="c4"><span>テキスト抽出処理の改善</span></p>
        <p class="c4"><span>ActiveDirectory認証への対応</span></p>
        <div><p class="c0 c10"><span></span></p></div>
        <hr class="c12">
        <div><p class="c1"><a href="#ftnt_ref1" name="ftnt1">[1]</a><span class="c3">&nbsp;http://www.walbrix.com/jp/</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref2" name="ftnt2">[2]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/全文検索</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref3" name="ftnt3">[3]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/索引</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref4" name="ftnt4">[4]</a><span class="c3">「 ユーザーがどんなファイルを突っ込むかわかったもんじゃないのでサポートのコストが測れない」ともいう</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref5" name="ftnt5">[5]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/PCサーバ</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref6" name="ftnt6">[6]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Xen_(仮想化ソフトウェア)</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref7" name="ftnt7">[7]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/準仮想化</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref8" name="ftnt8">[8]</a><span class="c3">&nbsp;http://www.walbrix.net</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref9" name="ftnt9">[9]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Docker</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref10" name="ftnt10">[10]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Gentoo_Linux</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref11" name="ftnt11">[11]</a><span class="c3">&nbsp;CoreOS </span><span class="c13 c3"><a class="c7" href="https://www.google.com/url?q=https%3A%2F%2Fcoreos.com&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEYLTCN4AG-fL28ZVzfBLc0Q-6IsQ">https://coreos.com</a></span><span class="c3">&nbsp;と似たアプローチである</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref12" name="ftnt12">[12]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Windows_Server</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref13" name="ftnt13">[13]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Server_Message_Block</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref14" name="ftnt14">[14]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Samba</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref15" name="ftnt15">[15]</a><span class="c3">&nbsp;http://groonga.org</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref16" name="ftnt16">[16]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Lucene</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref17" name="ftnt17">[17]</a><span class="c3">&nbsp;</span><span class="c3 c13"><a class="c7" href="http://www.google.com/url?q=http%3A%2F%2Frazil.jp%2Fproduct%2Fsenna%2F&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEFuQY6Djr7SW3P3W5IB0oz0ueoKg">http://razil.jp/product/senna/</a></span></p></div>
        <div><p class="c1"><a href="#ftnt_ref18" name="ftnt18">[18]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Python</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref19" name="ftnt19">[19]</a><span class="c3">&nbsp;http://qiita.com/groonga/items/71b145b37d77bd160bf2</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref20" name="ftnt20">[20]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Go_(プログラミング言語)</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref21" name="ftnt21">[21]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Flask</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref22" name="ftnt22">[22]</a><span class="c3">&nbsp;Python言語で書かれた Webアプリケーションを Webサーバと連携させるための標準的な方式</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref23" name="ftnt23">[23]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/AngularJS</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref24" name="ftnt24">[24]</a><span class="c3">&nbsp;Groongaでは、全文検索用のインデックスが有効になったデータベース・カラムにテキストを投入することで自動的にインデックスが更新される</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref25" name="ftnt25">[25]</a><span class="c3">&nbsp;往々にして、同じ内容で重複したファイルが企業のファイルサーバには大量に存在するものである</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref26" name="ftnt26">[26]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/全文検索#N-Gram</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref27" name="ftnt27">[27]</a><span class="c3">&nbsp;</span><span>Groongaは双方に対応している</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref28" name="ftnt28">[28]</a><span class="c3">&nbsp;形態素解析エンジンとしては MeCab http://ja.wikipedia.org/wiki/MeCab が古くからよく利用されており、Groongaもこれを使用する</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref29" name="ftnt29">[29]</a><span class="c3">&nbsp;技術者の価値観で飯は食えない。</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref30" name="ftnt30">[30]</a><span class="c3">&nbsp;http://en.wikipedia.org/wiki/Inotify</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref31" name="ftnt31">[31]</a><span class="c3">&nbsp;https://github.com/seb-m/pyinotify</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref32" name="ftnt32">[32]</a><span class="c3">&nbsp;もっとも、Pytnonの os.walk()が遅いため巨大なツリーの監視を開始するには長い時間を要する</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref33" name="ftnt33">[33]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/UTF-8</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref34" name="ftnt34">[34]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Network_Kanji_Filter</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref35" name="ftnt35">[35]</a><span class="c3">&nbsp;https://github.com/dagwieers/unoconv</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref36" name="ftnt36">[36]</a><span class="c3">&nbsp;</span><span class="c13 c3"><a class="c7" href="http://www.google.com/url?q=http%3A%2F%2Fja.wikipedia.org%2Fwiki%2FApache_OpenOffice&amp;sa=D&amp;sntz=1&amp;usg=AFQjCNEWpsvP8wreBTd74SRJnNsXq3Gj0w">http://ja.wikipedia.org/wiki/Apache_OpenOffice</a></span></p></div>
        <div><p class="c1"><a href="#ftnt_ref37" name="ftnt37">[37]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/LibreOffice</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref38" name="ftnt38">[38]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/X_Window_System</span></p></div>
        <div><p class="c1"><a href="#ftnt_ref39" name="ftnt39">[39]</a><span class="c3">&nbsp;http://ja.wikipedia.org/wiki/Xz_(ファイルフォーマット)</span></p></div>
      </div>
    </section>
  </body>
</html>
